<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chance Chameleon - Probability Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .bar-transition {
            transition: height 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .mono {
            font-family: 'Courier New', monospace;
        }
        
        .focus-visible:focus {
            outline: 2px solid #6366f1;
            outline-offset: 2px;
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Hero Section -->
    <section class="hero-gradient text-white py-20">
        <div class="container mx-auto px-4 max-w-6xl text-center">
            <h1 class="text-5xl md:text-6xl font-bold mb-4">ðŸ¦Ž Chance Chameleon</h1>
            <p class="text-xl md:text-2xl mb-6">Calculate probabilities easily and understand them at a glance with visualization</p>
            <p class="text-lg mb-8 opacity-90">A client-side probability calculator for students, creators, and analysts.<br>All calculations are processed in your browser for speed and security</p>
            <button onclick="document.getElementById('calculators').scrollIntoView({behavior: 'smooth'})" class="bg-white text-indigo-600 px-8 py-4 rounded-lg font-bold text-lg hover:bg-gray-100 transition shadow-lg">
                Start Calculating
            </button>
            <p class="mt-6 text-sm opacity-80">Three modes supported: Single Event Â· Independent Events Â· Dependent Events Â· Mutually Exclusive Events</p>
        </div>
    </section>

    <!-- Calculators Section -->
    <section id="calculators" class="py-16 bg-white">
        <div class="container mx-auto px-4 max-w-6xl">
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Single Event Calculator -->
                <div class="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl shadow-xl p-8">
                    <h2 class="text-3xl font-bold text-indigo-700 mb-3">Single Event Probability</h2>
                    <p class="text-gray-600 mb-6">Enter favorable and total outcomes to instantly see probability and percentage</p>
                    
                    <form id="singleEventForm" class="space-y-5">
                        <div>
                            <label for="favorable" class="block text-sm font-medium text-gray-700 mb-2">
                                Favorable Outcomes
                            </label>
                            <input 
                                type="number" 
                                id="favorable" 
                                name="favorable"
                                placeholder="e.g., 3"
                                min="0"
                                step="1"
                                class="w-full px-4 py-3 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                aria-describedby="favorable-help"
                            >
                            <p id="favorable-help" class="text-xs text-gray-500 mt-1">Must be â‰¥ 0 (integer)</p>
                        </div>
                        
                        <div>
                            <label for="total" class="block text-sm font-medium text-gray-700 mb-2">
                                Total Possible Outcomes
                            </label>
                            <input 
                                type="number" 
                                id="total" 
                                name="total"
                                placeholder="e.g., 10"
                                min="1"
                                step="1"
                                class="w-full px-4 py-3 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                aria-describedby="total-help"
                            >
                            <p id="total-help" class="text-xs text-gray-500 mt-1">Must be â‰¥ 1 (integer)</p>
                        </div>
                        
                        <div id="singleEventError" class="text-red-600 text-sm font-medium hidden" role="alert"></div>
                        
                        <button 
                            type="submit"
                            class="w-full bg-indigo-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-indigo-700 transition shadow-lg focus-visible"
                        >
                            Calculate
                        </button>
                    </form>
                    
                    <div id="singleEventResult" class="mt-6 p-6 bg-white rounded-xl shadow-md hidden" aria-live="polite">
                        <p class="text-sm text-indigo-600 font-medium mb-2">Probability</p>
                        <p class="text-4xl font-bold text-indigo-900 mono" id="singleProbability">-</p>
                        <p class="text-xl text-indigo-600 mono mt-2" id="singlePercent">-</p>
                        <p class="text-xs text-gray-500 mt-3">Calculation complete. Check the result above.</p>
                    </div>
                </div>

                <!-- Multiple Events Calculator -->
                <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-xl p-8">
                    <h2 class="text-3xl font-bold text-purple-700 mb-3">Multiple Events Probability</h2>
                    <p class="text-gray-600 mb-6">Select event type and enter probabilities to calculate combined probability</p>
                    
                    <form id="multipleEventsForm" class="space-y-5">
                        <div>
                            <label for="eventType" class="block text-sm font-medium text-gray-700 mb-2">
                                Event Type
                            </label>
                            <select 
                                id="eventType" 
                                name="eventType"
                                class="w-full px-4 py-3 border-2 border-purple-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            >
                                <option value="independent">Independent (multiply)</option>
                                <option value="dependent">Dependent (conditional multiply)</option>
                                <option value="mutually-exclusive">Mutually Exclusive (add, max 1)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Event Probabilities (0 to 1)
                            </label>
                            <div id="probabilityInputs" class="space-y-3"></div>
                            <button 
                                type="button"
                                id="addProbability"
                                class="mt-3 text-purple-600 hover:text-purple-700 font-medium text-sm flex items-center gap-1 focus-visible"
                            >
                                âž• Add Event
                            </button>
                        </div>
                        
                        <div id="multipleEventsError" class="text-red-600 text-sm font-medium hidden" role="alert"></div>
                        
                        <button 
                            type="submit"
                            class="w-full bg-purple-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-purple-700 transition shadow-lg focus-visible"
                        >
                            Calculate
                        </button>
                    </form>
                    
                    <div id="multipleEventsResult" class="mt-6 p-6 bg-white rounded-xl shadow-md hidden" aria-live="polite">
                        <p class="text-sm text-purple-600 font-medium mb-2">Combined Probability</p>
                        <p class="text-4xl font-bold text-purple-900 mono" id="multipleProbability">-</p>
                        <p class="text-xl text-purple-600 mono mt-2" id="multiplePercent">-</p>
                        <p class="text-xs text-gray-500 mt-3">Calculation complete. Check the result above.</p>
                    </div>
                    
                    <div class="mt-6 p-4 bg-purple-100 rounded-lg text-xs text-gray-700">
                        <p class="font-semibold mb-2">Mathematical Rules:</p>
                        <ul class="space-y-1">
                            <li>â€¢ <strong>Independent:</strong> Multiply all probabilities</li>
                            <li>â€¢ <strong>Dependent:</strong> Multiply conditional probabilities in order</li>
                            <li>â€¢ <strong>Mutually Exclusive:</strong> Add all probabilities, clamped at 1</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Visualization Section -->
    <section class="py-16 bg-gradient-to-br from-gray-50 to-gray-100">
        <div class="container mx-auto px-4 max-w-6xl">
            <div class="bg-white rounded-2xl shadow-xl p-8 md:p-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-3 text-center">ðŸ“ˆ Probability Visualization</h2>
                <p class="text-gray-600 text-center mb-10">Success and failure represented by two vertical bars. Heights update smoothly with each calculation</p>
                
                <div class="flex gap-12 items-end justify-center h-96" aria-label="Probability bar chart">
                    <!-- Success Bar -->
                    <div class="flex flex-col items-center flex-1 max-w-xs">
                        <div class="relative w-full h-80 bg-gray-100 rounded-xl overflow-hidden shadow-inner">
                            <div 
                                id="successBar"
                                class="absolute bottom-0 w-full bg-gradient-to-t from-green-500 to-green-400 bar-transition flex items-end justify-center pb-3"
                                style="height: 0%;"
                                role="progressbar"
                                aria-valuenow="0"
                                aria-valuemin="0"
                                aria-valuemax="100"
                                aria-label="Success probability"
                            >
                                <span id="successLabel" class="text-white font-bold text-2xl">0%</span>
                            </div>
                        </div>
                        <p class="mt-4 font-bold text-green-700 text-xl">Success</p>
                    </div>
                    
                    <!-- Failure Bar -->
                    <div class="flex flex-col items-center flex-1 max-w-xs">
                        <div class="relative w-full h-80 bg-gray-100 rounded-xl overflow-hidden shadow-inner">
                            <div 
                                id="failureBar"
                                class="absolute bottom-0 w-full bg-gradient-to-t from-red-400 to-red-300 bar-transition flex items-end justify-center pb-3"
                                style="height: 100%;"
                                role="progressbar"
                                aria-valuenow="100"
                                aria-valuemin="0"
                                aria-valuemax="100"
                                aria-label="Failure probability"
                            >
                                <span id="failureLabel" class="text-white font-bold text-2xl">100%</span>
                            </div>
                        </div>
                        <p class="mt-4 font-bold text-red-700 text-xl">Failure</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Examples Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4 max-w-6xl">
            <h2 class="text-3xl font-bold text-gray-800 mb-10 text-center">Quick Examples</h2>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-indigo-50 p-6 rounded-xl border-2 border-indigo-200">
                    <h3 class="font-bold text-indigo-700 mb-3">Single Event</h3>
                    <p class="text-sm text-gray-600 mb-2">Input: 3 and 10</p>
                    <p class="text-sm text-gray-800"><strong>Probability:</strong> 0.3</p>
                    <p class="text-sm text-gray-800"><strong>Percent:</strong> 30.0000%</p>
                </div>
                
                <div class="bg-purple-50 p-6 rounded-xl border-2 border-purple-200">
                    <h3 class="font-bold text-purple-700 mb-3">Independent Events</h3>
                    <p class="text-sm text-gray-600 mb-2">Input: 0.5, 0.6, 0.25</p>
                    <p class="text-sm text-gray-800"><strong>Probability:</strong> 0.075</p>
                    <p class="text-sm text-gray-800"><strong>Percent:</strong> 7.5000%</p>
                </div>
                
                <div class="bg-pink-50 p-6 rounded-xl border-2 border-pink-200">
                    <h3 class="font-bold text-pink-700 mb-3">Dependent Events</h3>
                    <p class="text-sm text-gray-600 mb-2">Input: 0.2, 0.5, 0.4</p>
                    <p class="text-sm text-gray-800"><strong>Probability:</strong> 0.04</p>
                    <p class="text-sm text-gray-800"><strong>Percent:</strong> 4.0000%</p>
                </div>
                
                <div class="bg-green-50 p-6 rounded-xl border-2 border-green-200">
                    <h3 class="font-bold text-green-700 mb-3">Mutually Exclusive</h3>
                    <p class="text-sm text-gray-600 mb-2">Input: 0.7, 0.5</p>
                    <p class="text-sm text-gray-800"><strong>Probability:</strong> 1.0</p>
                    <p class="text-sm text-gray-800"><strong>Percent:</strong> 100.0000%</p>
                    <p class="text-xs text-gray-500 mt-1">(clamping applied)</p>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section class="py-16 bg-gray-50">
        <div class="container mx-auto px-4 max-w-4xl">
            <h2 class="text-3xl font-bold text-gray-800 mb-10 text-center">How It Works</h2>
            
            <div class="space-y-6">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-bold text-indigo-700 text-xl mb-3">Single Event</h3>
                    <p class="text-gray-700">Probability is the number of favorable outcomes divided by the total number of possible outcomes.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-bold text-purple-700 text-xl mb-3">Independent Events</h3>
                    <p class="text-gray-700">All events do not affect each other, so multiply each probability together.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-bold text-pink-700 text-xl mb-3">Dependent Events</h3>
                    <p class="text-gray-700">The input values for the second and subsequent events should be conditional probabilities given that previous events occurred. Multiplication still applies.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-bold text-green-700 text-xl mb-3">Mutually Exclusive Events</h3>
                    <p class="text-gray-700">Two or more events cannot occur simultaneously, so add the probabilities. The sum is clamped at 1.</p>
                </div>
                
                <div class="bg-indigo-50 p-6 rounded-xl border-2 border-indigo-200">
                    <h3 class="font-bold text-indigo-700 text-xl mb-3">Rounding and Notation</h3>
                    <p class="text-gray-700">Decimal probabilities are displayed up to 10 digits, and percentages are shown to 4 decimal places.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Accessibility Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4 max-w-4xl">
            <h2 class="text-3xl font-bold text-gray-800 mb-10 text-center">Designed for Accessibility</h2>
            
            <div class="bg-gradient-to-br from-indigo-50 to-purple-50 p-8 rounded-xl shadow-md">
                <ul class="space-y-4 text-gray-700">
                    <li class="flex items-start gap-3">
                        <span class="text-indigo-600 font-bold">âœ“</span>
                        <span>All inputs are connected to their labels</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-indigo-600 font-bold">âœ“</span>
                        <span>Result areas have live region attributes so screen readers can announce changes</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-indigo-600 font-bold">âœ“</span>
                        <span>Success and failure bars include progressbar role and current values</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-indigo-600 font-bold">âœ“</span>
                        <span>Errors are communicated with text, not just color</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-indigo-600 font-bold">âœ“</span>
                        <span>Add and remove rows using keyboard only</span>
                    </li>
                </ul>
                <p class="mt-6 text-sm text-gray-600 italic">Use Tab key to navigate inputs and Enter or Space to activate buttons</p>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="py-16 bg-gray-50">
        <div class="container mx-auto px-4 max-w-4xl">
            <h2 class="text-3xl font-bold text-gray-800 mb-10 text-center">Frequently Asked Questions</h2>
            
            <div class="space-y-6">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-bold text-gray-800 text-lg mb-2">Why do some inputs show NaN as the result?</h3>
                    <p class="text-gray-600">It may be due to incorrect format or values outside the valid range. Check that your inputs are integers or numbers between 0 and 1.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-bold text-gray-800 text-lg mb-2">What should I enter for dependent events?</h3>
                    <p class="text-gray-600">The second and subsequent values represent conditional probabilities. Example: the second value is the probability given that the first event has occurred.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-bold text-gray-800 text-lg mb-2">Can the percentage exceed 100?</h3>
                    <p class="text-gray-600">In mutually exclusive mode, even if the sum exceeds 1, it is clamped and displayed as 1.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-bold text-gray-800 text-lg mb-2">Does it work without internet?</h3>
                    <p class="text-gray-600">Yes. All calculations are performed inside your browser.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Privacy Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4 max-w-4xl text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Your Data Stays in Your Browser</h2>
            <p class="text-gray-600 max-w-2xl mx-auto">Input values are never sent to a server. You can use this tool without a network connection. Optionally, recent calculation results can be stored in browser storage, but you can clear them anytime.</p>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-indigo-900 to-purple-900 text-white py-12">
        <div class="container mx-auto px-4 max-w-6xl">
            <div class="text-center mb-8">
                <h3 class="text-2xl font-bold mb-3">ðŸ¦Ž Chance Chameleon</h3>
                <p class="text-indigo-200 mb-4">Use freely for learning, teaching, and assignments.<br>Always verify your input values and event type for accurate calculations.</p>
            </div>
            
            <div class="border-t border-indigo-700 pt-8 text-center text-sm text-indigo-200">
                <p>&copy; 2025 Chance Chameleon. All rights reserved.</p>
                <p class="mt-2">
                    <a href="#" class="hover:text-white transition">Terms of Use</a> Â· 
                    <a href="#" class="hover:text-white transition">Accessibility Statement</a>
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Utility functions
        function clamp(value, min, max) {
            return Math.max(min, Math.min(max, value));
        }

        function formatPercent(probability) {
            return (probability * 100).toFixed(4) + '%';
        }

        function formatProbability(probability) {
            return probability.toFixed(10);
        }

        // Visualization update
        function updateBars(probability) {
            const clamped = clamp(probability, 0, 1);
            const successPercent = clamped * 100;
            const failurePercent = (1 - clamped) * 100;

            const successBar = document.getElementById('successBar');
            const failureBar = document.getElementById('failureBar');
            const successLabel = document.getElementById('successLabel');
            const failureLabel = document.getElementById('failureLabel');

            successBar.style.height = successPercent + '%';
            failureBar.style.height = failurePercent + '%';

            successLabel.textContent = successPercent.toFixed(1) + '%';
            failureLabel.textContent = failurePercent.toFixed(1) + '%';

            successBar.setAttribute('aria-valuenow', successPercent.toFixed(1));
            failureBar.setAttribute('aria-valuenow', failurePercent.toFixed(1));
        }

        // Single Event Calculator
        document.getElementById('singleEventForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const favorable = parseInt(document.getElementById('favorable').value);
            const total = parseInt(document.getElementById('total').value);
            const errorDiv = document.getElementById('singleEventError');
            const resultDiv = document.getElementById('singleEventResult');

            errorDiv.classList.add('hidden');
            errorDiv.textContent = '';

            // Validation
            if (isNaN(favorable) || isNaN(total)) {
                errorDiv.textContent = 'Please enter integers';
                errorDiv.classList.remove('hidden');
                return;
            }

            if (total <= 0) {
                errorDiv.textContent = 'Total outcomes must be greater than or equal to 1';
                errorDiv.classList.remove('hidden');
                return;
            }

            if (favorable < 0) {
                errorDiv.textContent = 'Favorable outcomes must be greater than or equal to 0';
                errorDiv.classList.remove('hidden');
                return;
            }

            if (favorable > total) {
                errorDiv.textContent = 'Favorable outcomes must be between 0 and total outcomes';
                errorDiv.classList.remove('hidden');
                return;
            }

            // Calculate
            const probability = favorable / total;
            document.getElementById('singleProbability').textContent = formatProbability(probability);
            document.getElementById('singlePercent').textContent = formatPercent(probability);
            resultDiv.classList.remove('hidden');

            // Update visualization
            updateBars(probability);
        });

        // Multiple Events Calculator - Dynamic inputs
        let eventCount = 0;

        function addProbabilityInput(value = '') {
            const container = document.getElementById('probabilityInputs');
            const inputId = 'prob' + eventCount;
            const div = document.createElement('div');
            div.className = 'flex gap-2 items-center';
            div.innerHTML = `
                <input 
                    type="number" 
                    id="${inputId}"
                    name="probability"
                    placeholder="e.g., 0.5"
                    min="0"
                    max="1"
                    step="0.01"
                    value="${value}"
                    class="flex-1 px-4 py-3 border-2 border-purple-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    aria-label="Event ${eventCount + 1} probability"
                >
                <button 
                    type="button"
                    class="remove-prob text-red-600 hover:text-red-700 p-2 text-xl font-bold focus-visible"
                    aria-label="Remove event ${eventCount + 1}"
                >
                    âœ•
                </button>
            `;
            container.appendChild(div);
            eventCount++;

            // Add remove handler
            div.querySelector('.remove-prob').addEventListener('click', function() {
                if (container.children.length > 1) {
                    div.remove();
                }
            });
        }

        // Initialize with 2 inputs
        addProbabilityInput();
        addProbabilityInput();

        document.getElementById('addProbability').addEventListener('click', function() {
            addProbabilityInput();
        });

        // Multiple Events Form Submit
        document.getElementById('multipleEventsForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const eventType = document.getElementById('eventType').value;
            const inputs = document.querySelectorAll('input[name="probability"]');
            const errorDiv = document.getElementById('multipleEventsError');
            const resultDiv = document.getElementById('multipleEventsResult');

            errorDiv.classList.add('hidden');
            errorDiv.textContent = '';

            // Collect and validate probabilities
            const probabilities = [];
            for (let input of inputs) {
                const val = parseFloat(input.value);
                if (isNaN(val)) {
                    errorDiv.textContent = 'Please enter valid numbers for all probability fields';
                    errorDiv.classList.remove('hidden');
                    return;
                }
                if (val < 0 || val > 1) {
                    errorDiv.textContent = 'Each probability must be between 0 and 1';
                    errorDiv.classList.remove('hidden');
                    return;
                }
                probabilities.push(val);
            }

            if (probabilities.length < 1) {
                errorDiv.textContent = 'Please add at least one event probability';
                errorDiv.classList.remove('hidden');
                return;
            }

            // Calculate based on event type
            let result;
            if (eventType === 'independent' || eventType === 'dependent') {
                result = probabilities.reduce((acc, p) => acc * p, 1);
            } else if (eventType === 'mutually-exclusive') {
                result = probabilities.reduce((acc, p) => acc + p, 0);
                result = clamp(result, 0, 1);
            }

            // Display result
            document.getElementById('multipleProbability').textContent = formatProbability(result);
            document.getElementById('multiplePercent').textContent = formatPercent(result);
            resultDiv.classList.remove('hidden');

            // Update visualization
            updateBars(result);
        });
    </script>
</body>
</html>
